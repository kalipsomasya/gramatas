{% extends "layout.html" %}
{% block body %}

<div class="form-wrapper">
  <div class="top-bar">    <!-- galvene ar pareju uz citam lapaspusem -->
    <a href="{{ url_for('sakums') }}" class="montserrat-h">Mana grÄmatu kolekcija</a>
    <h1 class="montserrat-H">GrÄmatu saraksts</h1>
    <a href="{{ url_for('pievienot') }}" class="montserrat-h">Pievienot jaunu grÄmatu</a>
  </div>

  <div class="filter-bar">       <!-- filtrÄ“Å¡anas laukums-->
    <span class="open-sans-S">FiltrÄ“t pÄ“c:</span>
  
    <span class="filter-link">    <!-- filtrÄ“ uzklikÅ¡Ä·inot vienu reizi pa alfabetu un otru reize otrÄdi-->
      <a href="{{ url_for('saraksts', sort='nosaukums', order='desc' if active_filters.sort == 'nosaukums' and active_filters.order == 'asc' else 'asc') }}" class="open-sans-S">
        Nosaukums
      </a>
    </span>
  
    <span class="filter-link">    <!-- filtrÄ“ uzklikÅ¡Ä·inot vienu reizi pa alfabetu un otru reize otrÄdi-->
      <a href="{{ url_for('saraksts', sort='autors', order='desc' if active_filters.sort == 'autors' and active_filters.order == 'asc' else 'asc') }}" class="open-sans-S">
        Autors
      </a>
    </span>
  
    <form method="get" style="display:inline;">      <!-- izkritoÅ¡as izvÄ“les ar stilu -->
      <select name="zanrs" onchange="this.form.submit()">
        <option value="">Å½anrs</option>
        {% for z in visi_zanri %}
          <option value="{{ z }}" {% if z == active_filters.zanrs %}selected{% endif %}>{{ z }}</option>
        {% endfor %}
      </select>
    </form>
  
    <form method="get" style="display:inline;">
      <select name="gads" onchange="this.form.submit()">
        <option value="">Gads</option>
        {% for g in grupeti_gadi %}
          <option value="{{ g }}" {% if g|string == active_filters.gads %}selected{% endif %}>{{ g }}â€“{{ g + 4 }}</option>
        {% endfor %}
      </select>
    </form>
  
    <form method="get" style="display:inline;">
      <select name="statuss" onchange="this.form.submit()">
        <option value="">Statuss</option>
        {% for s in ["IzlasÄ«ts", "Lasu", "Pamests", "PlÄnÄ"] %}
          <option value="{{ s }}" {% if s == active_filters.statuss %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
    </form>
  
  </div>
  

  <table class="book-table">    <!-- kartiÅ†as ar ierakstiem-->
    <tbody>
      {% for gr in gramatas %}
      <tr class="open-sans-P">
        <td>{{ loop.index }}</td>
        <td class="open-sans-B">{{ gr.nosaukums }}</td>
        <td class="open-sans-B">{{ gr.autors }}</td>
        <td>{{ gr.zanrs }}</td>
        <td>{{ gr.gads }}</td>
        <td class="truncate" title="{{ gr.isuma }}">{{ gr.isuma }}</td>   <!-- uzvedot virsu peli parÄdas pilns teksts-->
        <td>  
          {% if gr.statuss == 'IzlasÄ«ts' %}
            âœ…
          {% elif gr.statuss == 'Lasu' %}
            â³
          {% elif gr.statuss == 'Pamests' %}
            ğŸ˜´
          {% elif gr.statuss == 'PlÄnÄ' %}
            ğŸ“…
          {% endif %}
        </td>
        <td><a href="{{ url_for('rediget', id=gr.id) }}">ğŸ–‹ï¸</a></td>  <!-- rediÄ£Ä“Å¡anas poga (ved uz lapu kas lidziga formai bet ir aizpildita ar esoÅ¡iem datiem kurus velas rediget)-->
        <td><a href="{{ url_for('dzest', id=gr.id) }}" onclick="return confirm('Vai tieÅ¡Äm dzÄ“st Å¡o grÄmatu?')">ğŸ—‘ï¸</a></td>     <!-- dzÄ“Å¡ ierakstu, prasa vai tieÅ¡am dzÄ“st pirms nodzÄ“Å¡-->
        
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
